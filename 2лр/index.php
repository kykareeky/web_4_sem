<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?php echo "Власова Мария, 241-352, лаб. работа №2"; ?></title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="logo.png" alt="Логотип университета" class="logo" width="65" height="65">
        </div>
        <div class="header-text">
            <p>Л.р №2  Власова Мария Вариант: 5</p>
        </div>
    </header>

    <main>
        <h1>Циклические алгоритмы. Условия в алгоритмах. </h1>
        <h2>Вариант задания</h2>
        <img src="foto.png" alt="Условие задачи">
        <?php
        // 1. Явная инициализация переменных
        $x = -10;                   // начальное значение аргумента
        $encounting = 20;           // количество вычисляемых значений
        $step = 2;                  // шаг изменения аргумента
        $min_value = -100;          // минимальное значение функции для остановки
        $max_value = 100;           // максимальное значение функции для остановки
        $type = 'B';                // тип верстки: A, B, C, D, E

        // 2. Инициализация строковой переменной для типа верстки
        $layout_type = $type;
        
        // Словарь для отображения типа верстки
        $layout_names = [
            'A' => 'Простая текстовая',
            'B' => 'Маркированный список',
            'C' => 'Нумерованный список',
            'D' => 'Табличная',
            'E' => 'Блочная'
        ];
        $layout_name = isset($layout_names[$layout_type]) ? $layout_names[$layout_type] : $layout_type;

        // 3. Массив для хранения значений функции
        $values = [];
        $sum = 0;
        $count = 0;
        $error_count = 0;  // Счетчик ошибок деления на ноль

        // 4. Функция для вычисления f(x) с округлением и проверкой деления на ноль
        function computeF($x) {
            if ($x <= 10) {
                return round(3 * $x + 9, 3);
            } elseif ($x > 10 && $x < 20) {
                // Проверка деления на ноль
                $denominator = $x**2 - 121;
                if ($denominator == 0) {
                    return "error";
                }
                return round(($x + 3) / $denominator, 3);
            } elseif ($x >= 20) {
                return round(4 * $x**2 - 11, 3);
            }
        }

        // 5. Начало вывода в зависимости от типа верстки
        if ($type == 'B') echo '<ul>';
        if ($type == 'C') echo '<ol>';
        if ($type == 'D') echo '<table class="bordered-table"><tr><th>№</th><th>x</th><th>f(x)</th></tr>';
        if ($type == 'E') echo '<div class="block-container">';

        // 6. Цикл вычислений
        for ($i = 0; $i < $encounting; $i++) {
            $f = computeF($x);

            // Проверка на остановку по min/max
            if (is_numeric($f)) {
                if ($f < $min_value || $f > $max_value) {
                    break;
                }
                $values[] = $f;
                $sum += $f;
                $count++;
            } elseif ($f == "error") {
                $error_count++;
            }

            // Вывод в зависимости от типа верстки
            switch ($type) {
                case 'A':
                    echo "f($x) = $f";
                    if ($i < $encounting - 1) echo '<br>';
                    break;
                case 'B':
                case 'C':
                    echo "<li>f($x) = $f</li>";
                    break;
                case 'D':
                    echo "<tr><td>" . ($i + 1) . "</td><td>$x</td><td>$f</td></tr>";
                    break;
                case 'E':
                    echo "<div class='block'>f($x) = $f</div>";
                    break;
            }

            $x += $step;
        }

        // 7. Закрытие контейнеров верстки
        if ($type == 'B') echo '</ul>';
        if ($type == 'C') echo '</ol>';
        if ($type == 'D') echo '</table>';
        if ($type == 'E') echo '</div>';

        // 8. Вычисление статистики
        if ($count > 0) {
            $min = min($values);
            $max = max($values);
            $average = round($sum / $count, 3);
        } else {
            $min = $max = $average = "нет данных";
            $sum = 0;
        }
        ?>

        <div class="stats">
            <h2>Статистика вычислений</h2>
            <p>Минимальное значение: <?php echo $min; ?></p>
            <p>Максимальное значение: <?php echo $max; ?></p>
            <p>Среднее арифметическое: <?php echo $average; ?></p>
            <p>Сумма всех значений: <?php echo round($sum, 3); ?></p>
            <p>Количество ошибок (деление на ноль): <?php echo $error_count; ?></p>
        </div>
        <br><br>
        <h1>Что изучили по итогам лаб.работы №2:</h1>
        <h2>Ответы на контрольные вопросы</h2>
        <ol style="list-style: none; padding-left: 40px;">
            <li><strong>1. Что такое цикл?</strong> — Цикл — это управляющая конструкция, предназначенная для многократного выполнения одного и того же блока кода до тех пор, пока выполняется заданное условие.</li>

            <li><strong>2. Что такое условный оператор?</strong> — Условный оператор (if, else, elseif) — это конструкция, которая позволяет выполнять различные блоки кода в зависимости от истинности или ложности логического выражения.</li>
        
            <li><strong>3. Какие виды циклов бывают?</strong> — В PHP существуют четыре вида циклов: for (цикл со счётчиком), while (цикл с предусловием), do-while (цикл с постусловием) и foreach (цикл для перебора массивов).</li>
        
            <li><strong>4. Чем цикл с предусловием отличается от цикла с постусловием?</strong> — Цикл с предусловием (while) проверяет условие перед выполнением тела цикла и может не выполниться ни разу. Цикл с постусловием (do-while) проверяет условие после выполнения тела цикла и гарантированно выполняется хотя бы один раз.</li>
        
            <li><strong>5. Чем отличаются операторы break и continue?</strong> — Break полностью прекращает выполнение всего цикла и выходит из него. Continue завершает только текущую итерацию цикла и переходит к следующей итерации.</li>
        
            <li><strong>6. Можно ли решить задачу листингов А-2.4 – 6 четвертым путем? Если да, то каким?</strong> — Да, можно использовать цикл foreach с предварительно сгенерированным массивом аргументов. Другой вариант — использовать оператор goto для перехода к метке после цикла, хотя этот подход считается устаревшим.</li>
        
            <li><strong>7. Зачем в листинге А-2.5 проверяется условие первой итерации цикла?</strong> — Проверка !$i (или $i == 0) необходима, чтобы гарантировать выполнение хотя бы первой итерации. При входе в цикл while условие проверяется сразу, и если начальное значение f уже выходит за пределы, без этой проверки цикл не выполнится ни разу, что некорректно.</li>
        
            <li><strong>8. Что такое итерация?</strong> — Итерация — это однократное выполнение тела цикла. Один «проход» цикла называется одной итерацией.</li>
        
            <li><strong>9. Какой тип данных определяет условие?</strong> — Условие в PHP определяется логическим (булевым) типом данных bool, который может принимать два значения: true (истина) или false (ложь).</li>
        
            <li><strong>10. Что такое булева алгебра?</strong> — Булева алгебра — это раздел математической логики, в котором переменные могут принимать только два значения (истина/ложь, 1/0), а операции над ними определяются таблицами истинности. Она является основой работы компьютерных схем и логических выражений в программировании.</li>
        
            <li><strong>11. Какие операции булевой алгебры (логические операции) Вы знаете?</strong> — Основные логические операции: И (&&, AND), ИЛИ (||, OR), НЕ (!, NOT), исключающее ИЛИ (XOR). Также используются составные операции: И-НЕ (NAND), ИЛИ-НЕ (NOR).</li>
        
            <li><strong>12. Как в PHP округлить значение до заданной точности?</strong> — Для округления используется функция round($value, $precision). Первый параметр — округляемое число, второй — количество знаков после запятой. Например, round(3.14159, 2) вернёт 3.14.</li>
        
            <li><strong>13. Как в PHP преобразовать вещественный тип к целому?</strong> — Существует несколько способов: (int)$value, intval($value), floor($value) для округления вниз, ceil($value) для округления вверх. Также работает автоматическое приведение типов при математических операциях.</li>
        
            <li><strong>14. Какие виды округления используются в PHP?</strong> — Основные виды: round() — математическое округление (по правилам .5 вверх), floor() — округление вниз, ceil() — округление вверх, intval() — отбрасывание дробной части. Также round() поддерживает режимы PHP_ROUND_HALF_UP, PHP_ROUND_HALF_DOWN, PHP_ROUND_HALF_EVEN, PHP_ROUND_HALF_ODD.</li>
        
            <li><strong>15. Что такое конструкция выбора?</strong> — Конструкция выбора (switch-case) — это управляющая структура, которая позволяет выполнять различные блоки кода в зависимости от значения одного выражения. Она является альтернативой множественным конструкциям if-elseif.</li>
        
            <li><strong>16. Почему в примере А-2.2 и других не надо обрабатывать возможность деления на ноль при x=4?</strong> — В примере -2.2 рассматривается функция с делением (x-4) в знаменателе, но при x=4 программа не заходит в эту ветку вычислений. Третья ветка (else) срабатывает только при x≥20, а x=4 обрабатывается первой веткой (x≤10). Таким образом, опасное деление физически не выполняется при опасном значении аргумента.</li>
        
            <li><strong>17. Как изменить код А-2.3 так, чтобы выводить символ перевода строки "&lt;br&gt;" не в конце сформированной строки с данными, а в ее начале?</strong> — Нужно изменить условие: вместо проверки "если это не последняя итерация" использовать проверку "если это не первая итерация": if($i > 0) echo '&lt;br&gt;'; echo 'f('.$x.')='.$f; Тогда &lt;br&gt; будет выводиться перед каждой строкой, кроме первой.</li>
                </ul>
            </li>
        </ol>
        <br><br>
    </main>

    <footer>
        <p>Тип верстки: <?php echo $layout_name; ?></p>
        <p>&copy; <?php echo date('Y'); ?> Лабораторная работа №2</p>
    </footer>
</body>
</html>